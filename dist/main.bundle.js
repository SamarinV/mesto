(()=>{"use strict";const e=class{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClassActive=e.errorClassActive,this._form=t,this._inputList=e.inputList,this._submitButton=e.submitButton}_isValid(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);t.textContent=e.validationMessage,t.classList.add(this._errorClassActive),e.classList.add(this._inputErrorClass)}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);t.classList.remove(this._errorClassActive),t.textContent="",e.classList.remove(this._inputErrorClass)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.setAttribute("disabled","true")):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.removeAttribute("disabled"))}_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e),e.addEventListener("input",(()=>{this._isValid(e),this._toggleButtonState()}))}))}_getForm(){return document.querySelector(this._form)}enableValidation(){return this._formElement=this._getForm(),this._setEventListeners(),this._formElement}clearError(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}},t={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_disabled",inputErrorClass:"popup__input_type_error",errorClassActive:"popup__input-error_active"},s={cardClass:".places__item",likeClass:".places__like",toggleLike:"places__like_active",buttonDeleteClass:".places__delete",imageClass:".places__image",imageTitleClass:".places__title",popupImageLookPlace:".popup__image",popupImageTitleLookPlace:".popup__image-description"},i=document.querySelector(".popup_edit"),o=document.querySelector(".profile__button-edit"),r=document.querySelector(".popup__close_edit"),n=document.querySelector(".profile__name"),l=document.querySelector(".profile__about-self"),a=document.querySelector(".popup__form_edit"),p=document.querySelector(".popup__input_profile-name"),u=document.querySelector(".popup__input_about-self"),c=document.querySelector(".popup_add-place"),_=document.querySelector(".profile__button-add"),d=document.querySelector(".popup__close_add-place"),m=document.querySelector(".popup__form_add-place"),h=document.querySelector(".popup__input_name-place"),g=document.querySelector(".popup__input_url-image"),v=document.querySelector(".popup__close_look-place"),k=document.querySelector(".places"),y=document.querySelector(".popup_position_look-place"),S=new e(t,".popup_add-place");function C(e,t,s,i,o,r){const n=new class{constructor(e,t,s,i,o,r){this._openPopup=r,this._popup=o,this._name=s,this._link=i,this._cardSelector=t,this._cardClass=e.cardClass,this._likeClass=e.likeClass,this._toggleLike=e.toggleLike,this._buttonDeleteClass=e.buttonDeleteClass,this._imageClass=e.imageClass,this._imageTitleClass=e.imageTitleClass,this._popupImageLookPlace=document.querySelector(e.popupImageLookPlace),this._popupImageTitleLookPlace=document.querySelector(e.popupImageTitleLookPlace)}_getTemplate=()=>document.querySelector(this._cardSelector).content.querySelector(this._cardClass).cloneNode(!0);_handleDeleteCard=()=>{this._element.remove(),this._element=null};_handleToggleLike=()=>{this._element.querySelector(this._likeClass).classList.toggle(this._toggleLike)};_handleOpenPopup=()=>{this._popupImageLookPlace.setAttribute("src",`${this._link}`),this._popupImageLookPlace.setAttribute("alt",this._name),this._popupImageTitleLookPlace.textContent=this._name,this._openPopup(this._popup)};_setEventListeners(){this._element.querySelector(this._buttonDeleteClass).addEventListener("click",this._handleDeleteCard),this._element.querySelector(this._likeClass).addEventListener("click",this._handleToggleLike),this._element.querySelector(this._imageClass).addEventListener("click",this._handleOpenPopup)}generateCard(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(this._imageClass).setAttribute("src",`${this._link}`),this._element.querySelector(this._imageClass).setAttribute("alt",this._name),this._element.querySelector(this._imageTitleClass).textContent=this._name,this._element}}(e,t,s,i,o,r).generateCard();k.prepend(n)}function L(e){e.classList.add("popup_open"),document.addEventListener("keydown",f)}function E(e){e.classList.remove("popup_open"),document.removeEventListener("keydown",f)}function f(e){"Escape"===e.key&&E(document.querySelector(".popup_open"))}S.enableValidation(),new e(t,".popup_edit").enableValidation(),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((e=>{C(s,".places__template",e.name,e.link,y,L)})),y.addEventListener("click",(e=>{e.target.closest(".popup__container")&&e.target!==v||E(y)})),o.addEventListener("click",(()=>{p.value=n.textContent,u.value=l.textContent,L(i)})),i.addEventListener("click",(e=>{e.target.closest(".popup__container")&&e.target!==r||E(i)})),a.addEventListener("submit",(e=>{e.preventDefault(),n.textContent=p.value,l.textContent=u.value,E(i)})),_.addEventListener("click",(()=>{h.value="",g.value="",S.clearError(),L(c)})),c.addEventListener("click",(e=>{e.target.closest(".popup__container")&&e.target!==d||E(c)})),m.addEventListener("submit",(e=>{e.preventDefault(),C(s,".places__template",h.value,g.value,y,L),E(c)}))})();